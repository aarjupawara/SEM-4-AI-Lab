import random

gate ="MainGate"

#percept
track_values = ["Detected", "Not Detected"]
obstacle_values = ["Detected", "Not Detected"]
manual_values = ["Neutral", "Active"]

# Actuators initialization
actuators = {
    "gate_arm": "Raise",
    "alram": "OFF",
    "signal": "GREEN"
}

print("\n")
print(f"Crossing: {gate}")
print(f"Initial Actuators State: {actuators}")
print("\n")


# Random percepts for this step
percepts = {
    "train_entering": random.choice(track_values),
    "train_leaving": random.choice(track_values),
    "obstacle": random.choice(obstacle_values)
}

# ---------- Reflex Rules ----------
if percepts["obstacle"] == "Detected":
    # Rule 1: Emergency stop if obstacle detected
    actuators["gate_arm"] = "Lower"
    actuators["alram"] = "ON"
    actuators["signal"] = "RED"

elif (percepts["train_entering"] == "Detected" or percepts["train_leaving"] == "Detected") \
    and percepts["obstacle"] == "Not Detected":
    # Rule 2: Train detected, no obstacle
    actuators["gate_arm"] = "Lower"
    actuators["alram"] = "ON"
    actuators["signal"] = "GREEN"

else:
    # Rule 3: No train, no obstacle
    actuators["gate_arm"] = "Raise"
    actuators["alram"] = "OFF"
    actuators["signal"] = "GREEN"



print(f"Percepts: {percepts}")
print(f"Actuators: {actuators}")
   
